name: BitMEX assembly
description: Sample assembly file

labels:
  region: canada,usa

spec:
  env:
    - name: AWS_REGION
      value: ${AWS_REGION}
    - name: AWS_ACCESS_KEY_ID
      value: ${AWS_ACCESS_KEY_ID}
    - name: AWS_SECRET_ACCESS_KEY
      value: ${AWS_SECRET_ACCESS_KEY}
    - name: AZURE_STORAGE_ACCOUNT
      value: ${AZURE_STORAGE_ACCOUNT}
    - name: AZURE_STORAGE_SHARED_KEY
      value: ${AZURE_STORAGE_SHARED_KEY}
    - name: KX_TRACE_OBJSTR
      value: "1"   
    - name: KX_KURL_DEBUG_LOG          
      value: "1"        

# Database schema
tables:
  trade:
    description: Trade data
    type: partitioned
    blockSize: 10000
    prtnCol: timestamp
    sortColsOrd: symbol
    sortColsDisk: symbol
    columns:
      - name: symbol
        description: Symbol name
        type: symbol
        attrMem: grouped
        attrDisk: parted
        attrOrd: parted
      - name: timestamp
        description: Time
        type: timestamp
      - name: side
        description: side
        type: symbol
      - name: size
        description: bid price
        type: long
      - name: price
        description: bid price
        type: float        
      - name: tickDirection
        description: Big size
        type: symbol
      - name: trdMatchID
        description: Ask size
        type: guid
      - name: grossValue
        description: Ask size
        type: long
      - name: homeNotional
        description: Ask size
        type: float
      - name: foreignNotional
        description: Ask size
        type: float                        

  quote:
    description: Quote data
    type: partitioned
    blockSize: 10000
    prtnCol: timestamp
    sortColsOrd: symbol
    sortColsDisk: symbol
    columns:
      - name: symbol
        description: Symbol name
        type: symbol
        attrMem: grouped
        attrDisk: parted
        attrOrd: parted
      - name: timestamp
        description: Time
        type: timestamp
      - name: bidSize
        description: Bid price
        type: float
      - name: bidPrice
        description: bid price
        type: float
      - name: askPrice
        description: Big size
        type: float
      - name: askSize
        description: Ask size
        type: float


# Database mount configuration
mounts:
  hdb:
    type: local
    baseURI: file:///data/db/hdb
    partition: none      


# Service configuration
elements:
  rc:
    host: sgrc
    port: 5060
    timeout: 30000

  dap:
    # These configs apply to all DA below
    gwEndpoints: sgrc:5060
    instances:
      HDB:
        # Config specific to DAPs with a KXI_SC of HDB
        mountName: hdb
        # par: file:///data/db/hdb/par.txt
        # sym: file:///data/db/hdb/sym

